(this["webpackJsonpterragrid-frontend"]=this["webpackJsonpterragrid-frontend"]||[]).push([[0],{174:function(e,t,s){"use strict";s.r(t);var c=s(0),n=s(1),r=s.n(n),i=s(26),a=s.n(i),l=(s(88),s(4)),j=s(81),o=s(7),d=s(6),u=s.n(d),b=s(5),h=function(e){var t=Object(n.useState)(""),s=Object(b.a)(t,2),r=s[0],i=s[1],a=Object(n.useState)(""),l=Object(b.a)(a,2),j=l[0],o=l[1];return Object(c.jsx)("div",{children:Object(c.jsx)("div",{children:Object(c.jsxs)("form",{onSubmit:function(t){t.preventDefault(),u.a.post("".concat("https://terragrid.herokuapp.com","/login"),{email:r,password:j}).then((function(t){t.data.success&&(sessionStorage.setItem("token",JSON.stringify(t.data.token)),sessionStorage.setItem("user",JSON.stringify(t.data.user)),u.a.defaults.headers.common.Authorization="Bearer ".concat(t.data.token),e.history.push("/maps"))})).catch(console.error)},children:[Object(c.jsx)("input",{type:"email",name:"email",onChange:function(e){return i(e.target.value)},required:!0}),Object(c.jsx)("input",{type:"password",name:"password",onChange:function(e){return o(e.target.value)},required:!0}),Object(c.jsx)("button",{children:"Login"})]})})})},O=s(31),x=s.n(O),p=s(47),m=s(79),v=s.n(m),g=(s(75),function(e){var t=JSON.parse(sessionStorage.getItem("user")),s=Object(n.useState)(!1),r=Object(b.a)(s,2),i=r[0],a=r[1];return Object(c.jsxs)("div",{className:"navbar",children:[e.onMapMenu?Object(c.jsxs)("div",{className:"menu collapsed",children:[Object(c.jsx)("span",{children:"MENU"}),"driver"===t.userType?Object(c.jsx)("div",{className:"menu-items",children:e.driverJourneys.map((function(t,s){return Object(c.jsxs)("div",{className:"item",children:[Object(c.jsxs)("div",{className:"first",children:[Object(c.jsx)("span",{children:t.vehicle.code}),Object(c.jsx)("button",{name:"driver",id:t._id,className:"start-button",onClick:e.startJourney,children:"Start Journey"})]}),Object(c.jsxs)("div",{className:"second",children:[Object(c.jsx)("span",{children:t.status}),Object(c.jsx)("span",{children:"OR"}),Object(c.jsx)("span",{children:"DT"})]})]},s)}))}):Object(c.jsx)("div",{className:"menu-items",children:e.journeys.map((function(t,s){return Object(c.jsxs)("div",{className:"item",children:[Object(c.jsxs)("div",{className:"first",children:[Object(c.jsx)("span",{children:t.vehicle.code}),Object(c.jsx)("input",{id:t._id,type:"checkbox",onClick:e.toggleRoute})]}),Object(c.jsxs)("div",{className:"second",children:[Object(c.jsx)("span",{children:t.status}),Object(c.jsx)("span",{children:"OR"}),Object(c.jsx)("span",{children:"DT"})]})]},s)}))})]}):null,Object(c.jsxs)("div",{className:"settings",children:["driver"!==t.userType?Object(c.jsx)("div",{onClick:e.simulateJourneys,children:"Simulate"}):null,Object(c.jsxs)("div",{onMouseEnter:function(){return a(!0)},onMouseLeave:function(){return a(!1)},children:[Object(c.jsxs)("div",{className:"profile-image",children:[t.firstName," ",t.lastName," O"]}),i?Object(c.jsx)("div",{className:"dropdown-wrapper",children:Object(c.jsxs)("div",{className:"dropdown",children:[Object(c.jsx)("div",{children:"Profile"}),"admin"!==t.userType?null:e.onMapMenu?Object(c.jsx)("div",{onClick:function(){return e.handleUrlRoute("/settings")},children:"Settings"}):Object(c.jsx)("div",{onClick:function(){return e.handleUrlRoute("/maps")},children:"Maps"}),Object(c.jsx)("div",{onClick:function(){sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),u.a.defaults.headers.common.Authorization=void 0,e.history.push("/login")},children:"Logout"})]})}):null]})]})]})}),f=s(10),N=s.n(f),C=(s(136),s(178)),y=s(180),k=s(179);s(138);var S="https://terragrid.herokuapp.com",w={},D={},M={},J=v()(S),q=function(e){var t=Object(n.useState)(null),s=Object(b.a)(t,2),r=s[0],i=s[1],a=Object(n.useState)(null),j=Object(b.a)(a,2),o=(j[0],j[1],Object(n.useState)(null)),d=Object(b.a)(o,2),h=(d[0],d[1],Object(n.useState)([])),O=Object(b.a)(h,2),m=O[0],v=O[1],f=Object(n.useState)([]),q=Object(b.a)(f,2),U=q[0],A=q[1];Object(n.useEffect)((function(){var e=JSON.parse(sessionStorage.getItem("user"));"driver"!==e.userType?u.a.get("".concat(S,"/journeys")).then((function(e){v(e.data)})).catch(console.error):u.a.get("".concat(S,"/journeys/driver/").concat(e._id)).then((function(e){A(e.data)})).catch(console.error)}),[]);var E=Object(n.useState)([]),I=Object(b.a)(E,2),V=(I[0],I[1],function(){var e=Object(p.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N.a.motion.polyline(t,{color:"transparent"},{auto:!0,duration:1e3},{removeOnEnd:!0,showMarker:!0}).addTo(r);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),L=function(e){return new Promise((function(t){return setTimeout(t,e)}))},R=function(){var e=Object(p.a)(x.a.mark((function e(t){var s,c,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(t),e.next=3,L(2e3);case 3:s=Object.values(M)[0],c=0;case 5:if(!(c<s.length-1)){e.next=14;break}return n=[s[c],s[c+1]],V(n),r=n,i=t.target.id,J.emit("coords",r,i),J.on("coords",(function(e){var t=JSON.parse(sessionStorage.getItem("user"));console.log("here"),"driver"!==t.userType&&V(e)})),e.next=11,L(990);case 11:c++,e.next=5;break;case 14:case"end":return e.stop()}var r,i}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(e){var t=e.target.id;if(!0===e.target.checked||"driver"===e.target.name){var s="driver"===e.target.name?U.find((function(e){return e._id===t})):m.find((function(e){return e._id===t})),c=[[s.originGeoCode.lat,s.originGeoCode.lng],[s.destinationGeoCode.lat,s.destinationGeoCode.lng]];P(c,t)}else F(t)},P=function(e,t){w[t]=e,r.fitBounds(Object.values(w));var s=N.a.Routing.control({router:N.a.Routing.mapbox("pk.eyJ1Ijoiamt1cHMiLCJhIjoiY2tramFsN2EyMDJmNjJwcGVodms0ZDIzeiJ9.g1MbhlX-djVh_CZYt7t-dQ"),waypoints:[e[0],e[1]],containerClassName:"itinerary-wrapper"}).addTo(r);s.on("routeselected",(function(e){D[t]=s,M[t]=e.route.coordinates}))},F=function(e){var t=D[e];delete w[e],delete D[e],delete M[e],t.remove(),Object.keys(w).length>0&&r.fitBounds(Object.values(w))};return Object(c.jsxs)("div",{children:[Object(c.jsx)(g,Object(l.a)(Object(l.a)({},e),{},{journeys:m,driverJourneys:U,toggleRoute:T,onMapMenu:!0,handleUrlRoute:function(t){e.history.push(t)},simulateJourneys:function(){var e=Object.values(M);if(e.length>0)for(var t=0;t<e.length;t++)V(e[t])},startJourney:R})),Object(c.jsxs)(C.a,{center:[-37.840935,144.946457],zoomControl:!1,zoom:13,scrollWheelZoom:!1,whenCreated:i,children:[Object(c.jsx)(y.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(c.jsx)(k.a,{position:"bottomright"})]})]})},U=function(e){var t=function(t){e.history.push(t)};return Object(c.jsxs)("div",{children:[Object(c.jsx)(g,{showMapMenu:!1,handleUrlRoute:t}),Object(c.jsxs)("div",{className:"settings-wrapper",children:[Object(c.jsx)("h2",{children:"TerraMap for Logistics Coy."}),Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{children:"Users"}),Object(c.jsx)("div",{onClick:function(){return t("/settings/drivers")},children:"Drivers"}),Object(c.jsx)("div",{onClick:function(){return t("/settings/vehicles")},children:"Vehicles"}),Object(c.jsx)("div",{onClick:function(){return t("/settings/journeys")},children:"Journeys"})]})]})]})},A=function(e){var t=Object(n.useState)([]),s=Object(b.a)(t,2),r=s[0],i=s[1];Object(n.useEffect)((function(){u.a.get("".concat("https://terragrid.herokuapp.com","/drivers")).then((function(e){i(e.data)})).catch(console.error)}),[]);var a=function(t){e.history.push(t)};return Object(c.jsxs)("div",{children:[Object(c.jsx)(g,Object(l.a)(Object(l.a)({},e),{},{onMapMenu:!1,handleUrlRoute:a})),Object(c.jsx)("div",{className:"admin-wrapper",children:Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"admin-sidebar",children:[Object(c.jsx)("div",{children:"Users"}),Object(c.jsx)("div",{onClick:function(){return a("/settings/drivers")},children:"Drivers"}),Object(c.jsx)("div",{onClick:function(){return a("/settings/vehicles")},children:"Vehicles"}),Object(c.jsx)("div",{onClick:function(){return a("/settings/journeys")},children:"Journeys"})]}),Object(c.jsxs)("div",{className:"admin-list",children:[Object(c.jsx)("div",{children:Object(c.jsx)("button",{onClick:function(){return a("/settings/drivers/new")},children:"Add Driver"})}),Object(c.jsxs)("div",{className:"entity-list",children:[Object(c.jsxs)("ul",{className:"heading",children:[Object(c.jsx)("li",{}),Object(c.jsx)("li",{}),Object(c.jsx)("li",{children:"Full Name"}),Object(c.jsx)("li",{children:"Mobile Number"}),Object(c.jsx)("li",{children:"Email Address"}),Object(c.jsx)("li",{children:"Driver's License"}),Object(c.jsx)("li",{children:"Status"})," ",Object(c.jsx)("li",{children:"Action"})]}),r.map((function(e,t){return Object(c.jsxs)("ul",{className:"entity-row",children:[Object(c.jsx)("li",{children:t+1}),Object(c.jsx)("li",{}),Object(c.jsxs)("li",{children:[e.firstName," ",e.lastName]}),Object(c.jsx)("li",{children:e.mobileNumber}),Object(c.jsx)("li",{children:e.email}),Object(c.jsx)("li",{children:e.licenseNumber}),Object(c.jsx)("li",{children:e.status}),Object(c.jsxs)("li",{children:[Object(c.jsx)("span",{onClick:function(){a("/settings/drivers/".concat(e._id,"/edit"))},children:"Update"}),"\xa0|\xa0",Object(c.jsx)("span",{children:"Delete"})]})]},t)}))]})]})]})})]})},E=s(13),I=function(e){var t=Object(n.useState)(null),s=Object(b.a)(t,2),r=s[0],i=s[1],a=function(t){e.history.push(t)},j=function(e){var t=e.target.name;i((function(s){return Object(l.a)(Object(l.a)({},s),{},Object(E.a)({},t,e.target.value))}))};return Object(c.jsxs)("div",{children:[Object(c.jsx)(g,Object(l.a)(Object(l.a)({},e),{},{onMapMenu:!1,handleUrlRoute:a})),Object(c.jsx)("div",{className:"admin-wrapper",children:Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"admin-sidebar",children:[Object(c.jsx)("div",{children:"Users"}),Object(c.jsx)("div",{onClick:function(){return a("/settings/drivers")},children:"Drivers"}),Object(c.jsx)("div",{onClick:function(){return a("/settings/vehicles")},children:"Vehicles"}),Object(c.jsx)("div",{onClick:function(){return a("/settings/journeys")},children:"Journeys"})]}),Object(c.jsx)("div",{className:"admin-form",children:Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:"heading",children:"New Driver"}),Object(c.jsx)("form",{onSubmit:function(t){t.preventDefault(),u.a.post("".concat("https://terragrid.herokuapp.com","/drivers"),r).then((function(t){t.data.success&&e.history.push("/settings/drivers")})).catch(console.error)},children:Object(c.jsxs)("div",{className:"form-wrapper",children:[Object(c.jsx)("div",{children:Object(c.jsx)("label",{className:"profile-photo",children:Object(c.jsx)("input",{type:"file"})})}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsxs)("label",{children:[Object(c.jsx)("p",{children:"First Name:"}),Object(c.jsx)("input",{name:"firstName",type:"text",placeholder:"First Name",onChange:j,required:!0})]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("p",{children:"Last Name:"}),Object(c.jsx)("input",{name:"lastName",type:"text",placeholder:"Last Name",onChange:j,required:!0})]})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsxs)("label",{children:[Object(c.jsx)("p",{children:"Mobile Number:"}),Object(c.jsx)("input",{name:"mobileNumber",type:"text",placeholder:"Mobile Number",onChange:j,required:!0})]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("p",{children:"Email Address:"}),Object(c.jsx)("input",{name:"email",type:"email",placeholder:"Email Address",onChange:j,required:!0})]})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsxs)("label",{children:[Object(c.jsx)("p",{children:"Drivers License Number:"}),Object(c.jsx)("input",{name:"licenseNumber",type:"text",placeholder:"License Number",onChange:j,required:!0})]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("p",{children:"License Expiry Date:"}),Object(c.jsx)("input",{name:"licenseExpiry",type:"date",placeholder:"Expiry Date",onChange:j,required:!0})]})]}),Object(c.jsx)("div",{className:"form-group",children:Object(c.jsxs)("label",{children:[Object(c.jsx)("p",{children:"Contact Address:"}),Object(c.jsx)("input",{type:"text",placeholder:"Contact address",required:!0})]})}),Object(c.jsx)("div",{className:"button-wrapper",children:Object(c.jsx)("button",{className:"form-button",children:"Save New Driver"})})]})})]})})]})})]})},V="https://terragrid.herokuapp.com",L=function(e){var t=Object(n.useState)(null),s=Object(b.a)(t,2),r=s[0],i=s[1];Object(n.useEffect)((function(){u.a.get("".concat(V,"/drivers/").concat(e.match.params.id)).then((function(e){i(e.data)})).catch(console.error)}),[]);var a=function(t){e.history.push(t)},j=function(e){var t=e.target.name;i((function(s){return Object(l.a)(Object(l.a)({},s),{},Object(E.a)({},t,e.target.value))}))};return Object(c.jsxs)("div",{children:[Object(c.jsx)(g,Object(l.a)(Object(l.a)({},e),{},{onMapMenu:!1,handleUrlRoute:a})),Object(c.jsx)("div",{className:"admin-wrapper",children:Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"admin-sidebar",children:[Object(c.jsx)("div",{children:"Users"}),Object(c.jsx)("div",{onClick:function(){return a("/settings/drivers")},children:"Drivers"}),Object(c.jsx)("div",{onClick:function(){return a("/settings/vehicles")},children:"Vehicles"}),Object(c.jsx)("div",{onClick:function(){return a("/settings/journeys")},children:"Journeys"})]}),Object(c.jsx)("div",{className:"admin-form",children:null!==r?Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:"heading",children:"Update Driver"}),Object(c.jsx)("form",{onSubmit:function(t){t.preventDefault(),u.a.put("".concat(V,"/drivers/").concat(e.match.params.id),r).then((function(t){t.data.success&&e.history.push("/settings/drivers")})).catch(console.error)},children:Object(c.jsxs)("div",{className:"form-wrapper",children:[Object(c.jsx)("div",{children:Object(c.jsx)("label",{className:"profile-photo update",style:{backgroundImage:"url(".concat("https://res.cloudinary.com/dxmmpe1wt/image/upload/v1612076361/","/").concat(r.photoUrl,")"),backgroundSize:"cover"},children:Object(c.jsx)("input",{type:"file"})})}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsxs)("label",{children:[Object(c.jsx)("p",{children:"First Name:"}),Object(c.jsx)("input",{name:"firstName",type:"text",value:r.firstName,placeholder:"First Name",onChange:j,required:!0})]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("p",{children:"Last Name:"}),Object(c.jsx)("input",{name:"lastName",type:"text",value:r.lastName,placeholder:"Last Name",onChange:j,required:!0})]})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsxs)("label",{children:[Object(c.jsx)("p",{children:"Mobile Number:"}),Object(c.jsx)("input",{name:"mobileNumber",type:"text",value:r.mobileNumber,placeholder:"Mobile Number",onChange:j,required:!0})]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("p",{children:"Email Address:"}),Object(c.jsx)("input",{name:"email",type:"email",value:r.email,placeholder:"Email Address",onChange:j,required:!0})]})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsxs)("label",{children:[Object(c.jsx)("p",{children:"Drivers License Number:"}),Object(c.jsx)("input",{name:"licenseNumber",type:"text",value:r.licenseNumber,placeholder:"License Number",onChange:j,required:!0})]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("p",{children:"License Expiry Date:"}),Object(c.jsx)("input",{name:"licenseExpiry",type:"date",value:r.licenseExpiry.split("T")[0],placeholder:"Expiry Date",onChange:j,required:!0})]})]}),Object(c.jsx)("div",{className:"form-group",children:Object(c.jsxs)("label",{children:[Object(c.jsx)("p",{children:"Contact Address:"}),Object(c.jsx)("input",{type:"text",placeholder:"Contact address",required:!0})]})}),Object(c.jsx)("div",{className:"button-wrapper",children:Object(c.jsx)("button",{className:"form-button",children:"Update Driver"})})]})})]}):null})]})})]})},R=function(e){var t=Object(n.useState)([]),s=Object(b.a)(t,2),r=s[0],i=s[1];Object(n.useEffect)((function(){u.a.get("".concat("https://terragrid.herokuapp.com","/vehicles")).then((function(e){i(e.data)})).catch(console.error)}),[]);var a=function(t){e.history.push(t)};return Object(c.jsxs)("div",{children:[Object(c.jsx)(g,Object(l.a)(Object(l.a)({},e),{},{onMapMenu:!1,handleUrlRoute:a})),Object(c.jsx)("div",{className:"admin-wrapper",children:Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"admin-sidebar",children:[Object(c.jsx)("div",{children:"Users"}),Object(c.jsx)("div",{onClick:function(){return a("/settings/drivers")},children:"Drivers"}),Object(c.jsx)("div",{onClick:function(){return a("/settings/vehicles")},children:"Vehicles"}),Object(c.jsx)("div",{onClick:function(){return a("/settings/journeys")},children:"Journeys"})]}),Object(c.jsxs)("div",{className:"admin-list",children:[Object(c.jsx)("div",{children:Object(c.jsx)("button",{onClick:function(){return a("/settings/vehicles/new")},children:"Add Vehicle"})}),Object(c.jsxs)("div",{className:"entity-list",children:[Object(c.jsxs)("ul",{className:"heading",children:[Object(c.jsx)("li",{}),Object(c.jsx)("li",{}),Object(c.jsx)("li",{children:"ID / Plate Number"}),Object(c.jsx)("li",{children:"Class"}),Object(c.jsx)("li",{children:"Curent Location"}),Object(c.jsx)("li",{children:"Weight  / Volume"}),Object(c.jsx)("li",{children:"Status"}),Object(c.jsx)("li",{children:"Action"})]}),r.map((function(e,t){return Object(c.jsxs)("ul",{className:"entity-row",children:[Object(c.jsx)("li",{children:t+1}),Object(c.jsx)("li",{}),Object(c.jsxs)("li",{children:[e.code," / ",e.plateNumber]}),Object(c.jsx)("li",{children:e.class.split("(")[0]}),Object(c.jsx)("li",{children:e.locationAddress}),Object(c.jsxs)("li",{children:[e.weight," kg / ",e.volume," cubic"]}),Object(c.jsx)("li",{children:e.status}),Object(c.jsxs)("li",{children:[Object(c.jsx)("span",{onClick:function(){a("/settings/vehicles/".concat(e._id,"/edit"))},children:"Update"}),"\xa0|\xa0",Object(c.jsx)("span",{children:"Delete"})]})]},t)}))]})]})]})})]})},T=function(e){var t=Object(n.useState)(null),s=Object(b.a)(t,2),r=s[0],i=s[1],a=Object(n.useState)("Class 1"),j=Object(b.a)(a,1)[0],o=function(t){e.history.push(t)},d=function(e){var t=e.target.name;i((function(s){return Object(l.a)(Object(l.a)({},s),{},Object(E.a)({},t,e.target.value))}))};return Object(c.jsxs)("div",{children:[Object(c.jsx)(g,Object(l.a)(Object(l.a)({},e),{},{onMapMenu:!1,handleUrlRoute:o})),Object(c.jsx)("div",{className:"admin-wrapper",children:Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"admin-sidebar",children:[Object(c.jsx)("div",{children:"Users"}),Object(c.jsx)("div",{onClick:function(){return o("/settings/drivers")},children:"Drivers"}),Object(c.jsx)("div",{onClick:function(){return o("/settings/vehicles")},children:"Vehicles"}),Object(c.jsx)("div",{onClick:function(){return o("/settings/journeys")},children:"Journeys"})]}),Object(c.jsx)("div",{className:"admin-form",children:Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:"heading",children:"New Vehicle"}),Object(c.jsx)("form",{onSubmit:function(t){t.preventDefault(),r.class||(r.class=j),u.a.post("".concat("https://terragrid.herokuapp.com","/vehicles"),r).then((function(t){t.data.success&&e.history.push("/settings/vehicles")})).catch(console.error)},children:Object(c.jsxs)("div",{className:"form-wrapper",children:[Object(c.jsx)("div",{children:Object(c.jsx)("label",{className:"profile-photo",children:Object(c.jsx)("input",{type:"file"})})}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsxs)("label",{children:[Object(c.jsx)("p",{children:"ID Number / Code:"}),Object(c.jsx)("input",{name:"code",type:"text",placeholder:"Id Number",onChange:d,required:!0})]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("p",{children:"Plate Number:"}),Object(c.jsx)("input",{name:"plateNumber",type:"text",placeholder:"Plate Number",onChange:d,required:!0})]})]}),Object(c.jsx)("div",{className:"form-group",children:Object(c.jsxs)("label",{children:[Object(c.jsx)("p",{children:"Vechle Class:"}),Object(c.jsxs)("select",{name:"class",onChange:d,required:!0,children:[Object(c.jsx)("option",{value:"Class 1",children:"Class 1 (Motorcycle)"}),Object(c.jsx)("option",{vaue:"Class 2",children:"Class 2 (Passenger car)"}),Object(c.jsx)("option",{vaue:"Class 3",children:"Class 3 (4 tire, single unit)"}),Object(c.jsx)("option",{vaue:"Class 4",children:"Class 4 (Bus)"}),Object(c.jsx)("option",{vaue:"Class 5",children:"Class 5 (2 axle, 6 tire, single unit)"}),Object(c.jsx)("option",{vaue:"Class 6",children:"Class 6 (3 axle, single unit)"}),Object(c.jsx)("option",{vaue:"Class 7",children:"Class 7 (4 or more axle, single unit)"}),Object(c.jsx)("option",{vaue:"Class 8",children:"Class 8 (4 or less axle, single trailer)"}),Object(c.jsx)("option",{vaue:"Class 9",children:"Class 9 (5 axle tractor semitrailer)"}),Object(c.jsx)("option",{vaue:"Class 10",children:"Class 10 (6 or more axle, single trailer)"}),Object(c.jsx)("option",{vaue:"Class 11",children:"Class 11 (5 or less axle, multi-trailer )"}),Object(c.jsx)("option",{vaue:"Class 12",children:"Class 12 (6 axle, multi-trailer)"}),Object(c.jsx)("option",{vaue:"Class 13",children:"Class 13 (7 or more axle, multi-trailer)"})]})]})}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsxs)("label",{children:[Object(c.jsx)("p",{children:"Weight (kg)"}),Object(c.jsx)("input",{name:"weight",type:"text",placeholder:"Weight",onChange:d,required:!0})]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("p",{children:"Volume (cubic meter)"}),Object(c.jsx)("input",{name:"volume",type:"text",placeholder:"Volume",onChange:d,required:!0})]})]}),Object(c.jsx)("div",{className:"form-group",children:Object(c.jsxs)("label",{children:[Object(c.jsx)("p",{children:"Parking Address:"}),Object(c.jsx)("input",{name:"homeAddress",type:"text",placeholder:"Enter address",onChange:d,required:!0})]})}),Object(c.jsx)("div",{className:"button-wrapper",children:Object(c.jsx)("button",{className:"form-button",children:"Save New Vehicle"})})]})})]})})]})})]})},P="https://terragrid.herokuapp.com",F=function(e){var t=Object(n.useState)(null),s=Object(b.a)(t,2),r=s[0],i=s[1];Object(n.useEffect)((function(){u.a.get("".concat(P,"/vehicles/").concat(e.match.params.id)).then((function(e){i(e.data)})).catch(console.error)}),[]);var a=function(t){e.history.push(t)},j=function(e){var t=e.target.name;i((function(s){return Object(l.a)(Object(l.a)({},s),{},Object(E.a)({},t,e.target.value))}))};return Object(c.jsxs)("div",{children:[Object(c.jsx)(g,Object(l.a)(Object(l.a)({},e),{},{onMapMenu:!1,handleUrlRoute:a})),Object(c.jsx)("div",{className:"admin-wrapper",children:Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"admin-sidebar",children:[Object(c.jsx)("div",{children:"Users"}),Object(c.jsx)("div",{onClick:function(){return a("/settings/drivers")},children:"Drivers"}),Object(c.jsx)("div",{onClick:function(){return a("/settings/vehicles")},children:"Vehicles"}),Object(c.jsx)("div",{onClick:function(){return a("/settings/journeys")},children:"Journeys"})]}),Object(c.jsx)("div",{className:"admin-form",children:null!==r?Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:"heading",children:"New Vehicle"}),Object(c.jsx)("form",{onSubmit:function(t){t.preventDefault(),u.a.put("".concat(P,"/vehicles/").concat(e.match.params.id),r).then((function(t){t.data.success&&e.history.push("/settings/vehicles")})).catch(console.error)},children:Object(c.jsxs)("div",{className:"form-wrapper",children:[Object(c.jsx)("div",{children:Object(c.jsx)("label",{className:"profile-photo update",children:Object(c.jsx)("input",{type:"file"})})}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsxs)("label",{children:[Object(c.jsx)("p",{children:"ID Number / Code:"}),Object(c.jsx)("input",{name:"code",value:r.code,type:"text",placeholder:"Id Number",onChange:j,required:!0})]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("p",{children:"Plate Number:"}),Object(c.jsx)("input",{name:"plateNumber",value:r.plateNumber,type:"text",placeholder:"Plate Number",onChange:j,required:!0})]})]}),Object(c.jsx)("div",{className:"form-group",children:Object(c.jsxs)("label",{children:[Object(c.jsx)("p",{children:"Vechle Class:"}),Object(c.jsxs)("select",{name:"class",value:r.class,onChange:j,required:!0,children:[Object(c.jsx)("option",{value:"Class 1",children:"Class 1 (Motorcycle)"}),Object(c.jsx)("option",{vaue:"Class 2",children:"Class 2 (Passenger car)"}),Object(c.jsx)("option",{vaue:"Class 3",children:"Class 3 (4 tire, single unit)"}),Object(c.jsx)("option",{vaue:"Class 4",children:"Class 4 (Bus)"}),Object(c.jsx)("option",{vaue:"Class 5",children:"Class 5 (2 axle, 6 tire, single unit)"}),Object(c.jsx)("option",{vaue:"Class 6",children:"Class 6 (3 axle, single unit)"}),Object(c.jsx)("option",{vaue:"Class 7",children:"Class 7 (4 or more axle, single unit)"}),Object(c.jsx)("option",{vaue:"Class 8",children:"Class 8 (4 or less axle, single trailer)"}),Object(c.jsx)("option",{vaue:"Class 9",children:"Class 9 (5 axle tractor semitrailer)"}),Object(c.jsx)("option",{vaue:"Class 10",children:"Class 10 (6 or more axle, single trailer)"}),Object(c.jsx)("option",{vaue:"Class 11",children:"Class 11 (5 or less axle, multi-trailer )"}),Object(c.jsx)("option",{vaue:"Class 12",children:"Class 12 (6 axle, multi-trailer)"}),Object(c.jsx)("option",{vaue:"Class 13",children:"Class 13 (7 or more axle, multi-trailer)"})]})]})}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsxs)("label",{children:[Object(c.jsx)("p",{children:"Weight (kg)"}),Object(c.jsx)("input",{name:"weight",value:r.weight,type:"text",placeholder:"Weight",onChange:j,required:!0})]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("p",{children:"Volume (cubic meter)"}),Object(c.jsx)("input",{name:"volume",value:r.volume,type:"text",placeholder:"Volume",onChange:j,required:!0})]})]}),Object(c.jsx)("div",{className:"form-group",children:Object(c.jsxs)("label",{children:[Object(c.jsx)("p",{children:"Parking Address:"}),Object(c.jsx)("input",{name:"homeAddress",value:r.homeAddress,type:"text",placeholder:"Enter address",onChange:j,required:!0})]})}),Object(c.jsx)("div",{className:"button-wrapper",children:Object(c.jsx)("button",{className:"form-button",children:"Update Vehicle"})})]})})]}):null})]})})]})},B="https://terragrid.herokuapp.com",_=function(e){var t=Object(n.useState)([]),s=Object(b.a)(t,2),r=s[0],i=s[1],a=Object(n.useState)([]),j=Object(b.a)(a,2),o=j[0],d=j[1],h=Object(n.useState)(!1),O=Object(b.a)(h,2),x=O[0],p=O[1],m=Object(n.useState)(""),v=Object(b.a)(m,2),f=v[0],N=v[1];Object(n.useEffect)((function(){u.a.get("".concat(B,"/vehicles")).then((function(e){var t=e.data.map((function(e){return{id:e._id,code:e.code,plateNumber:e.plateNumber,imageUrl:e.imageUrl}}));i(t)})).catch(console.error)}),[]);var C=function(t){e.history.push(t)};return Object(c.jsxs)("div",{children:[Object(c.jsx)(g,Object(l.a)(Object(l.a)({},e),{},{onMapMenu:!1,handleUrlRoute:C})),Object(c.jsx)("div",{className:"admin-wrapper",children:Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"admin-sidebar",children:[Object(c.jsx)("div",{children:"Users"}),Object(c.jsx)("div",{onClick:function(){return C("/settings/drivers")},children:"Drivers"}),Object(c.jsx)("div",{onClick:function(){return C("/settings/vehicles")},children:"Vehicles"}),Object(c.jsx)("div",{onClick:function(){return C("/settings/journeys")},children:"Journeys"})]}),Object(c.jsxs)("div",{className:"admin-list",children:[Object(c.jsxs)("div",{children:[Object(c.jsxs)("select",{onChange:function(e){var t=e.target.value;"none"!==t?u.a.get("".concat(B,"/journeys/vehicle/").concat(t)).then((function(e){d(e.data),p(!0),N(t)})).catch(console.error):(d([]),p(!1),N(""))},className:"standard",children:[Object(c.jsx)("option",{value:"none",children:"Select a vehicle"}),r.map((function(e,t){return Object(c.jsxs)("option",{value:e.id,children:[e.code," / ",e.plateNumber]},t)}))]}),Object(c.jsx)("button",{onClick:function(){return C("/settings/journeys/vehicle/".concat(f,"/new"))},disabled:!x,children:"Add a Journey"})]}),Object(c.jsxs)("div",{className:"entity-list",children:[Object(c.jsxs)("ul",{className:"heading",children:[Object(c.jsx)("li",{}),Object(c.jsx)("li",{children:"Origin"}),Object(c.jsx)("li",{children:"Destination"}),Object(c.jsx)("li",{children:"Duration"}),Object(c.jsx)("li",{children:"Instruction"}),Object(c.jsx)("li",{children:"Driver Assigned"}),Object(c.jsx)("li",{children:"Status"}),Object(c.jsx)("li",{children:"Action"})]}),o.map((function(e,t){return Object(c.jsxs)("ul",{children:[Object(c.jsx)("li",{children:t+1}),Object(c.jsx)("li",{children:e.origin}),Object(c.jsx)("li",{children:e.destination}),Object(c.jsx)("li",{}),Object(c.jsx)("li",{children:e.instruction}),Object(c.jsxs)("li",{children:[e.driver.firstName," ",e.driver.lastName]}),Object(c.jsx)("li",{children:e.status}),Object(c.jsx)("li",{children:"action"})]},t)}))]})]})]})})]})},z=s(80),W=s.n(z),G="https://terragrid.herokuapp.com",Z=function(e){var t=Object(n.useState)(null),s=Object(b.a)(t,2),r=s[0],i=s[1],a=Object(n.useState)({}),j=Object(b.a)(a,2),o=j[0],d=j[1],h=Object(n.useState)(new Date),O=Object(b.a)(h,2),x=O[0],p=O[1];Object(n.useEffect)((function(){u.a.get("".concat(G,"/vehicles/").concat(e.match.params.id)).then((function(e){d(e.data)})).catch(console.error)}),[]);var m=function(e){var t=e.target.name;i((function(s){return Object(l.a)(Object(l.a)({},s),{},Object(E.a)({},t,e.target.value))}))},v=function(t){e.history.push(t)};return Object(c.jsxs)("div",{children:[Object(c.jsx)(g,Object(l.a)(Object(l.a)({},e),{},{onMapMenu:!1,handleUrlRoute:v})),Object(c.jsx)("div",{className:"admin-wrapper",children:Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"admin-sidebar",children:[Object(c.jsx)("div",{children:"Users"}),Object(c.jsx)("div",{onClick:function(){return v("/settings/drivers")},children:"Drivers"}),Object(c.jsx)("div",{onClick:function(){return v("/settings/vehicles")},children:"Vehicles"}),Object(c.jsx)("div",{onClick:function(){return v("/settings/journeys")},children:"Journeys"})]}),Object(c.jsx)("div",{className:"admin-form",children:Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:"heading",children:"New Journey"}),Object(c.jsx)("form",{onSubmit:function(t){t.preventDefault(),u.a.post("".concat(G,"/journeys"),r).then((function(t){t.data.success&&e.history.push("/settings/journeys")})).catch(console.error)},children:Object(c.jsxs)("div",{className:"form-wrapper",children:[Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("label",{children:Object(c.jsx)("input",{type:"text",placeholder:"Origin Address",style:{marginBottom:"30px"},value:"Add a journey to vehicle ".concat(o.code," / ").concat(o.plateNumber),disabled:!0})})}),Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)(W.a,{onChange:p,value:x})}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsxs)("label",{children:[Object(c.jsx)("p",{children:"Origin Address:"}),Object(c.jsx)("input",{name:"code",type:"text",placeholder:"Origin Address",onChange:m,required:!0})]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("p",{children:"Destination Address:"}),Object(c.jsx)("input",{name:"plateNumber",type:"text",placeholder:"Destination Address",onChange:m,required:!0})]})]}),Object(c.jsx)("div",{className:"form-group",children:Object(c.jsxs)("label",{children:[Object(c.jsx)("p",{children:"Instruction:"}),Object(c.jsx)("textarea",{name:"code",type:"text",placeholder:"Instructions for the driver",onChange:m,required:!0})]})})]})})]})})]})})]})},Y=function(e){var t=JSON.parse(sessionStorage.getItem("token"));u.a.defaults.headers.common.Authorization="Bearer ".concat(t);var s=function(){var e=sessionStorage.getItem("user");return e||!1},n=function(){var e=sessionStorage.getItem("user");return!(!e||"admin"!==JSON.parse(e).userType)&&e};return Object(c.jsxs)(j.a,{children:[Object(c.jsx)(o.b,{exact:!0,path:"/login",render:function(e){return s()?Object(c.jsx)(o.a,{to:"/maps"}):Object(c.jsx)(h,Object(l.a)({},e))}}),Object(c.jsx)(o.b,{exact:!0,path:"/maps",render:function(e){return s()?Object(c.jsx)(q,Object(l.a)({},e)):Object(c.jsx)(o.a,{to:"/login"})}}),Object(c.jsx)(o.b,{exact:!0,path:"/settings",render:function(e){return n()?Object(c.jsx)(U,Object(l.a)({},e)):s()?Object(c.jsx)(o.a,{to:"/maps"}):Object(c.jsx)(o.a,{to:"/login"})}}),Object(c.jsx)(o.b,{exact:!0,path:"/settings/drivers",render:function(e){return n()?Object(c.jsx)(A,Object(l.a)({},e)):s()?Object(c.jsx)(o.a,{to:"/maps"}):Object(c.jsx)(o.a,{to:"/login"})}}),Object(c.jsx)(o.b,{exact:!0,path:"/settings/drivers/new",render:function(e){return n()?Object(c.jsx)(I,Object(l.a)({},e)):s()?Object(c.jsx)(o.a,{to:"/maps"}):Object(c.jsx)(o.a,{to:"/login"})}}),Object(c.jsx)(o.b,{exact:!0,path:"/settings/drivers/:id/edit",render:function(e){return n()?Object(c.jsx)(L,Object(l.a)({},e)):s()?Object(c.jsx)(o.a,{to:"/maps"}):Object(c.jsx)(o.a,{to:"/login"})}}),Object(c.jsx)(o.b,{exact:!0,path:"/settings/vehicles",render:function(e){return n()?Object(c.jsx)(R,Object(l.a)({},e)):s()?Object(c.jsx)(o.a,{to:"/maps"}):Object(c.jsx)(o.a,{to:"/login"})}}),Object(c.jsx)(o.b,{exact:!0,path:"/settings/vehicles/new",render:function(e){return n()?Object(c.jsx)(T,Object(l.a)({},e)):s()?Object(c.jsx)(o.a,{to:"/maps"}):Object(c.jsx)(o.a,{to:"/login"})}}),Object(c.jsx)(o.b,{exact:!0,path:"/settings/vehicles/:id/edit",render:function(e){return n()?Object(c.jsx)(F,Object(l.a)({},e)):s()?Object(c.jsx)(o.a,{to:"/maps"}):Object(c.jsx)(o.a,{to:"/login"})}}),Object(c.jsx)(o.b,{exact:!0,path:"/settings/journeys",render:function(e){return n()?Object(c.jsx)(_,Object(l.a)({},e)):s()?Object(c.jsx)(o.a,{to:"/maps"}):Object(c.jsx)(o.a,{to:"/login"})}}),Object(c.jsx)(o.b,{exact:!0,path:"/settings/journeys/vehicle/:id/new",render:function(e){return n()?Object(c.jsx)(Z,Object(l.a)({},e)):s()?Object(c.jsx)(o.a,{to:"/maps"}):Object(c.jsx)(o.a,{to:"/login"})}})]})},H=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,181)).then((function(t){var s=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,i=t.getTTFB;s(e),c(e),n(e),r(e),i(e)}))};a.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(Y,{})}),document.getElementById("root")),H()},75:function(e,t,s){},88:function(e,t,s){}},[[174,1,2]]]);
//# sourceMappingURL=main.f798b521.chunk.js.map